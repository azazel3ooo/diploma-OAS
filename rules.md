# Правила поведения сервисов

В данном файле зафиксированы правила поведения сервисов в спорных моментах.

## Ошибки класса 4xx

### 400 BadRequest

1. В случае невалидного тела запроса (битый json или xml) сервису 
необходимо отдавать статус 400.
2. В случае несоответствия типов полей сервис должен отдавать 400.
Данный пункт необходим, поскольку сервисы системы будут реализованы на строготипизированном
языке (Go) и несоответствие типам, указанным в спецификации, должно вызывать такое поведение.

### 404 NotFound

1. Если в пути метода присутствует идентификатор, который соответствует типу,
но отсутствует в системе, то сервис должен вернуть 404.
Пример:
```
Метод:
/stores/{storeId}
Где {storeId} - int

Вызов:
/stores/3
Повлечет 404
```
_*Важно:
Если указывается невалидный тип данных, то должно быть 422_
```
Метод:
/stores/{storeId}
Где {storeId} - int

Вызов:
/stores/test
Повлечет 422
```

### 422 UnprocessableEntity

1. Некорректное значение в теле запроса (значение не находится в рамках допустимых
значений или не проходит валидацию по формату/паттерну)
2. Значение параметра в пути или в query-параметрах не соответствует формату/паттерну

## Поведение сервиса в методах листинга

### Наличие фильтрации

1. Если в методе есть фильтры и их значения соответствуют формату, 
но фильтры противоречат друг другу и вызывают пустую подборку сущностей, то сервис должен вернуть
пустой массив и статус 200
2. Если значения фильтров соответствуют формату, но их значения не существуют в системе,
то сервис должен вернуть пустой массив и статус 200
Пример:
```
Вызов:
/pets?stores=3

при этом магазин с id 3 не существует в системе

Ответ сервиса:
[] + Статус 200
```